<div class="novicell-oembed-editor" ng-controller="Novicell.OEmbed.EditorController as vm">
    <form name="oembedForm" novalidate val-form-manager>
        <umb-editor-view>
            <umb-editor-header name="model.title" name-locked="true" hide-alias="true" hide-icon="true"
                hide-description="true">
            </umb-editor-header>

            <umb-editor-container class="block-form">
                <umb-box>
                    <umb-box-content>
                        <umb-control-group label="@general_url">
                            <input name="url" class="umb-property-editor input-block-level" type="text"
                                ng-model="model.value.url" ng-change="vm.update()" val-server-field="url" required />

                            <span ng-messages="oembedForm.url.$error">
                                <span class="help-inline" ng-message="valServerField"
                                    ng-bind="oembedForm.url.errorMsg"></span>
                            </span>
                        </umb-control-group>

                        <umb-load-indicator ng-if="vm.loading"> </umb-load-indicator>

                        <umb-control-group label="@general_preview" ng-if="model.value.oembed">
                            <novicell-oembed-preview model="model.value.oembed"></novicell-oembed-preview>
                        </umb-control-group>

                        <div ng-show="vm.supportsDimensions">
                            <umb-control-group label="@general_width">
                                <input type="number" pattern="[0-9]*" min="0" ng-model="vm.width"
                                    ng-change="vm.updateDimensions()" />
                            </umb-control-group>

                            <umb-control-group label="@general_height">
                                <input type="number" pattern="[0-9]*" min="0" ng-model="vm.height"
                                    ng-change="vm.updateDimensions()" />
                            </umb-control-group>

                            <umb-control-group label="@general_constrain">
                                <input id="constrain" type="checkbox" ng-model="model.value.embed.constrain" />
                            </umb-control-group>
                        </div>
                    </umb-box-content>
                </umb-box>
                <!--<pre>{{model | json}}</pre>-->
            </umb-editor-container>

            <umb-editor-footer>
                <umb-editor-footer-content-right>
                    <umb-button type="button" button-style="link" label-key="general_close" shortcut="esc"
                        action="vm.close()">
                    </umb-button>
                    <umb-button type="button" button-style="success" label-key="general_submit"
                        state="vm.saveButtonState" action="vm.submit(model)">
                    </umb-button>
                </umb-editor-footer-content-right>
            </umb-editor-footer>
        </umb-editor-view>
    </form>
</div>